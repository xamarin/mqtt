name: Xamarin.MQTT - CodeQL

resources:
  repositories:
  - repository: self
    checkoutOptions:
      submodules: true

  - repository: templates
    type: github
    name: xamarin/yaml-templates
    ref: refs/heads/main
    endpoint: xamarin

  - repository: release-scripts
    type: github
    name: xamarin/release-scripts
    ref: refs/heads/fix/devman-packaging
    endpoint: xamarin
    
schedules:
- cron: "00 18 * * Tue,Thu"
  displayName: Tuesday and Thursday afternoon builds for main branch
  branches:
    include:
    - main

pr: none
trigger: none

variables:
- template: build/variables.yml
  parameters:
    EnableCodeQL: true
    EnableCodeQLTSA: true
    CodeQLTSASettings: 'build/tsaoptions-v2.json'

stages:
- template: build/stages/build.yml
  parameters:
    EnableCodeSign: false